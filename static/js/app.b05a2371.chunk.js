(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{395:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return xe}));var n=o(13),i=o(5),c=o(42),l=o(12),a=c.default.get("window").width,r=l.default.create({display:{flex:1,backgroundColor:"#fff"},topAccount:{flex:.4,justifyContent:"flex-end",backgroundColor:"#dbffe3"},chart:{flex:1.3,justifyContent:"center"},middleAccount:{flex:.3,flexDirection:"row",justifyContent:"space-around",alignItems:"center",backgroundColor:"orange"},positionInfo:{flex:.8,flexDirection:"row",justifyContent:"space-around",backgroundColor:"green"},controlPanel:{flex:1.7,backgroundColor:"pink"},trade:{width:.95*a,backgroundColor:"grey"},shop:{width:.95*a,justifyContent:"center",backgroundColor:"purple"},rootControlButton:{flex:.5,backgroundColor:"blue",flexDirection:"row"}}),u=o(0),s=o(25),j=[{label:"x1",value:1},{label:"x2",value:2},{label:"x3",value:3},{label:"x5",value:5},{label:"x10",value:10},{label:"x25",value:25},{label:"x50",value:50}],d=[{x:new Date(2022,0,1),open:100,close:110,high:120,low:90},{x:new Date(2022,0,2),open:110,close:130,high:130,low:100},{x:new Date(2022,0,3),open:130,close:100,high:140,low:90},{x:new Date(2022,0,4),open:100,close:125,high:150,low:100},{x:new Date(2022,0,5),open:125,close:150,high:170,low:120},{x:new Date(2022,0,6),open:150,close:130,high:160,low:120},{x:new Date(2022,0,7),open:130,close:180,high:200,low:100},{x:new Date(2022,0,8),open:180,close:200,high:200,low:160},{x:new Date(2022,0,9),open:200,close:160,high:210,low:150},{x:new Date(2022,0,10),open:160,close:150,high:200,low:150},{x:new Date(2022,0,11),open:150,close:120,high:160,low:110},{x:new Date(2022,0,12),open:120,close:130,high:140,low:110},{x:new Date(2022,0,13),open:130,close:160,high:180,low:130},{x:new Date(2022,0,14),open:160,close:160,high:200,low:150},{x:new Date(2022,0,15),open:160,close:150,high:170,low:140}],b=Object(n.atom)({key:"candleDataState",default:d}),f=Object(n.atom)({key:"turnNumberState",default:1}),O=Object(n.atom)({key:"isLongControllerActiveState",default:!0}),h=Object(n.atom)({key:"isCandleMovingState",default:!1}),p=Object(n.atom)({key:"lastClosePriceState",default:150}),v=Object(n.atom)({key:"lastOpenPriceState",default:160}),x=(Object(n.atom)({key:"lastHighPriceState",default:170}),Object(n.atom)({key:"lastLowPriceState",default:140}),Object(n.atom)({key:"longLiquidState",default:0})),g=Object(n.atom)({key:"shortLiquidState",default:0}),P=Object(n.atom)({key:"accountState",default:1e6}),m=Object(n.atom)({key:"longAccountState",default:{positionActive:!1,openPrice:0,liquidPrice:0,leverage:1,openPositionAmount:0,openPositionValue:0,currentPositionValue:0}}),V=Object(n.atom)({key:"shortAccountState",default:{positionActive:!1,openPrice:0,liquidPrice:0,leverage:1,openPositionAmount:0,openPositionValue:0,currentPositionValue:0}}),A=Object(n.selector)({key:"longAccountDetailState",get:function(e){var t=(0,e.get)(m),o=t.leverage*(t.currentPositionValue-t.openPositionValue);return{positionActive:t.positionActive,openPrice:t.openPrice,liquidPrice:t.liquidPrice,leverage:t.leverage,openPositionAmount:t.openPositionAmount,openPositionValue:t.openPositionValue,currentPositionValue:t.currentPositionValue,unrealizedPnl:o,profitRate:o/t.openPositionValue,totalAsset:o+t.openPositionValue}}}),y=Object(n.selector)({key:"shortAccountDetailState",get:function(e){var t=(0,e.get)(V),o=t.leverage*(t.openPositionValue-t.currentPositionValue);return{positionActive:t.positionActive,openPrice:t.openPrice,liquidPrice:t.liquidPrice,leverage:t.leverage,openPositionAmount:t.openPositionAmount,openPositionValue:t.openPositionValue,currentPositionValue:t.currentPositionValue,unrealizedPnl:o,profitRate:o/t.openPositionValue,totalAsset:o+t.openPositionValue}}}),R=Object(n.selector)({key:"futureAccountState",get:function(e){var t=e.get,o=t(A),n=t(y),i=o.openPositionValue+n.openPositionValue,c=o.currentPositionValue+n.currentPositionValue,l=o.unrealizedPnl+n.unrealizedPnl;return{positionActive:o.positionActive||n.positionActive,openPositionValue:i,currentPositionValue:c,unrealizedPnl:l,profitRate:l/i,totalAsset:l+i}}}),S=Object(n.selector)({key:"totalAccountState",get:function(e){var t=e.get,o=t(P),n=t(R),i=n.openPositionValue+o,c=o+n.totalAsset,l=c-i;return{cash:o,futureValuation:n.totalAsset,totalAsset:c,unrealizedPnl:l,profitRate:l/i}}}),w=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},k=o(3);var C=Object(u.memo)((function(){var e=Object(n.useRecoilValue)(S);return Object(k.jsxs)(i.default,{style:r.middleAccount,children:[Object(k.jsxs)(s.default,{children:["\uc120\ubb3c \ud3c9\uac00 \uc790\uc0b0:"," ",w(Math.ceil(e.futureValuation)),"\uc6d0"]}),Object(k.jsxs)(s.default,{children:["\ubcf4\uc720 \ud604\uae08: ",w(Math.ceil(e.cash)),"\uc6d0"]})]})}));var D=Object(u.memo)((function(){var e=Object(n.useRecoilValue)(S);return Object(k.jsx)(i.default,{style:r.topAccount,children:Object(k.jsxs)(s.default,{style:{fontSize:16},children:["\ud3c9\uac00\uc790\uc0b0:",w(Math.ceil(e.totalAsset)),"\uc6d0"," ",((e.totalAsset-1e6)/1e6*100).toFixed(2),"%"]})})})),L=o(81),q=o.n(L),F=o(32),M=o.n(F),z=o(74),H=o(671),E=o(667),T=o(672),B=o(674),I=o(675),N=function(e,t,o){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.05,i={x:e,open:t,high:t,low:t,close:t},c=[i],l=0;l<o;l++){var a=Object(z.cloneDeep)(i),r=a.close*Object(z.random)(1-n,1+n,!0),u=a.high<r?r:a.high,s=a.low>r?r:a.low;a.close=r,a.high=u,a.low=s,i=a,c.push(a)}return c};var W=function(){var e=Object(n.useRecoilValue)(f),t=Object(n.useRecoilState)(b),o=M()(t,2),c=o[0],l=o[1],a=Object(n.useRecoilState)(h),r=M()(a,2),s=(r[0],r[1]),j=Object(n.useRecoilState)(p),d=M()(j,2),O=d[0],x=d[1],g=Object(n.useRecoilState)(v),P=M()(g,2),R=P[0],S=P[1],w=Object(n.useRecoilState)(m),C=M()(w,2),D=(C[0],C[1]),L=Object(n.useRecoilState)(V),F=M()(L,2),W=(F[0],F[1]),J=Object(n.useRecoilValue)(A),U=Object(n.useRecoilValue)(y),Y=Object(n.useResetRecoilState)(m),G=Object(n.useResetRecoilState)(V),K=Object(u.useState)([new Date(2022,0,1),new Date(2022,0,15)]),Q=M()(K,2),X=Q[0],Z=Q[1],$=Object(u.useState)([75,185]),_=M()($,2),ee=_[0],te=_[1],oe=function(e,t,o){return setTimeout((function(){l((function(t){var o=q()(t);return o.slice(-1)[0].x.toString()==e.x.toString()?o[o.length-1]=e:o.push(e),o})),x(e.close),J.positionActive&&(D((function(t){var o=Object(z.cloneDeep)(t);return o.currentPositionValue=e.close*o.openPositionAmount,o})),J.liquidPrice>=e.low&&Y()),U.positionActive&&(W((function(t){var o=Object(z.cloneDeep)(t);return o.currentPositionValue=e.close*o.openPositionAmount,o})),U.liquidPrice<=e.high&&G()),t===o&&s(!1)}),150*t)};return Object(u.useEffect)((function(){var t=[];if(e>1){var o=c.slice(-1)[0].x,n=new Date(o);n.setDate(o.getDate()+1);var i=c.slice(-1)[0].close,l=N(n,i,20);S(l[0].open);for(var a=0;a<l.length;a++){var r=l[a];t.push(oe(r,a,l.length-1))}return function(){t.forEach((function(e){return clearTimeout(e)}))}}}),[e]),Object(u.useEffect)((function(){var e=c.slice(-15),t=e[0].x,o=new Date(t);o.setDate(t.getDate()+15),Z([t,o]);var n=Number(ee[0])+15,i=Number(ee[1])-15;e.forEach((function(e){e.low<n&&(n=e.low),e.high>i&&(i=e.high)})),te([n-15,i+15])}),[c]),Object(k.jsx)(i.default,{children:Object(k.jsxs)(H.VictoryChart,{domainPadding:{x:10},containerComponent:Object(k.jsx)(E.VictoryCursorContainer,{cursorLabel:function(e){var t=e.datum;return"     price :   "+Object(z.round)(t.y,1)}}),children:[Object(k.jsx)(T.VictoryAxis,{dependentAxis:!0,style:{grid:{stroke:"#b6b6b6",strokeWidth:.5}}}),Object(k.jsx)(B.default,{candleRatio:.85,style:{data:{strokeWidth:1,stroke:function(e){return e.close<e.open?"#c43a31":"#1759bb"}}},candleColors:{positive:"#c43a31",negative:"#1759bb"},data:c,domain:{x:X,y:ee}}),Object(k.jsx)(I.VictoryLine,{domain:{x:X,y:ee},y:function(){return O},style:{data:{stroke:function(e){return O>R?"#c43a31":"#1759bb"},strokeWidth:.5}}})]})})};var J=function(){return Object(k.jsx)(i.default,{style:r.chart,children:Object(k.jsx)(W,{})})};var U=Object(u.memo)((function(){return Object(k.jsx)(i.default,{children:Object(k.jsx)(s.default,{children:"\ud3ec\uc9c0\uc158\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})})),Y=o(52);var G=Object(u.memo)((function(e){var t=e.closeHandler;return Object(k.jsx)(Y.default,{style:{backgroundColor:"red",height:"100%"},onPress:t,children:Object(k.jsx)(s.default,{children:"Close"})})}));var K=Object(u.memo)((function(e){var t=e.leverage;return Object(k.jsx)(i.default,{children:Object(k.jsxs)(s.default,{children:["\ub808\ubc84\ub9ac\uc9c0 : x",t]})})}));var Q=Object(u.memo)((function(e){var t=e.openPositionValue;return Object(k.jsx)(i.default,{children:Object(k.jsxs)(s.default,{children:["\uc9c4\uc785 \ud3ec\uc9c0\uc158 \uac00\uce58 : ",w(Math.ceil(t)),"\uc6d0"]})})}));var X=Object(u.memo)((function(e){var t=e.unrealizedPnl,o=e.profitRate;return Object(k.jsx)(i.default,{children:Object(k.jsxs)(s.default,{children:["\ubbf8\uc2e4\ud604 \uc190\uc775 : ",w(Math.ceil(t)),"\uc6d0"," ",(100*o).toFixed(2),"%"]})})}));var Z=Object(u.memo)((function(e){var t=e.isLong;return Object(k.jsx)(i.default,{children:Object(k.jsx)(s.default,{children:t?"Long":"Short"})})}));var $=function(e){var t=e.accountDetail,o=e.closeHandler,n=e.isLong;return Object(k.jsxs)(i.default,{children:[Object(k.jsx)(Z,{isLong:n}),Object(k.jsx)(K,{leverage:t.leverage}),Object(k.jsx)(Q,{openPositionValue:t.openPositionValue}),Object(k.jsx)(X,{unrealizedPnl:t.unrealizedPnl,profitRate:t.profitRate}),Object(k.jsx)(G,{closeHandler:o})]})};var _=Object(u.memo)((function(e){var t=e.positionActive,o=e.accountDetail,n=e.closeHandler,i=e.isLong;return Object(k.jsx)(k.Fragment,{children:t?Object(k.jsx)($,{accountDetail:o,closeHandler:n,isLong:i}):Object(k.jsx)(U,{})})}));var ee=Object(u.memo)((function(){var e=Object(n.useRecoilValue)(h),t=Object(n.useRecoilState)(P),o=M()(t,2),c=(o[0],o[1]),l=Object(n.useRecoilValue)(A),a=Object(n.useResetRecoilState)(m),u=Object(n.useRecoilValue)(y),s=Object(n.useResetRecoilState)(V);return Object(n.useRecoilValue)(p),Object(k.jsxs)(i.default,{style:r.positionInfo,children:[Object(k.jsx)(_,{positionActive:l.positionActive,accountDetail:l,closeHandler:function(){e||(c((function(e){return e+l.totalAsset})),a())},isLong:!0}),Object(k.jsx)(_,{positionActive:u.positionActive,accountDetail:u,closeHandler:function(){e||(c((function(e){return e+u.totalAsset})),s())},isLong:!1})]})})),te=o(79);var oe=function(){return Object(k.jsx)(i.default,{style:r.shop,children:Object(k.jsx)(s.default,{children:"Shop"})})},ne=function(e,t,o){return l.default.create({container:{backgroundColor:"whitesmoke",width:"80%",flexDirection:"row",opacity:e?.5:1},box:{flex:1,padding:5,backgroundColor:t===o?"red":"skyblue"}})};var ie=Object(u.memo)((function(e){var t=e.options,o=e.value,n=e.setValueFunction,c=e.disabled;return Object(k.jsx)(i.default,{style:ne(c).container,children:t.map((function(e,t){return Object(k.jsx)(Y.default,{onPress:function(t){return o=e.value,void n(o);var o},style:ne(c,o,e.value).box,disabled:c,children:Object(k.jsx)(s.default,{children:e.label})},t)}))})})),ce=o(384),le=o.n(ce);var ae=Object(u.memo)((function(e){var t=e.amountRate,o=e.setAmountRate;return Object(k.jsxs)(i.default,{children:[Object(k.jsx)(s.default,{children:"\ubcf4\uc720 \ud604\uae08 \ub300\ube44 "}),Object(k.jsxs)(s.default,{children:[t,"%"]}),Object(k.jsx)(le.a,{minimumValue:0,maximumValue:100,step:5,minimumTrackTintColor:"#FFFFFF",maximumTrackTintColor:"#000000",value:t,onValueChange:function(e){o(e)},tapToSeek:!0})]})}));var re=Object(u.memo)((function(e){var t=e.activeLeverage,o=e.leverage,n=e.setLeverage,c=e.disabled;return Object(k.jsxs)(i.default,{children:[Object(k.jsx)(s.default,{children:"\ub808\ubc84\ub9ac\uc9c0"}),Object(k.jsx)(ie,{options:j,value:t||o,setValueFunction:n,disabled:c})]})}));var ue=Object(u.memo)((function(e){var t=e.isLongSelected,o=e.longLiquid,n=e.shortLiquid;return Object(k.jsx)(i.default,{children:Object(k.jsxs)(s.default,{children:["\uccad\uc0b0\uac00 :"," ",w(t?Math.ceil(o):Math.ceil(n))]})})}));var se=Object(u.memo)((function(e){var t=e.totalPrice,o=e.coinAmount;return Object(k.jsx)(i.default,{children:Object(k.jsxs)(s.default,{children:["\uc8fc\ubb38\ucd1d\uc561 : ",w(Math.ceil(t)),"\uc6d0 | \uac1c\uc218 :"," ",o]})})}));var je=Object(u.memo)((function(e){var t=e.isCandleMoving,o=e.buttonHandler,n=e.isBuy;return Object(k.jsx)(Y.default,{style:{backgroundColor:"green",height:"100%",opacity:t?.5:1},onPress:o,disabled:t,children:Object(k.jsx)(s.default,{children:n?"BUY":"Sell"})})}));var de=function(e){var t=e.disabled,o=e.activeLeverage,c=Object(n.useRecoilState)(P),l=M()(c,2),a=l[0],r=l[1],s=Object(n.useRecoilState)(x),j=M()(s,2),d=j[0],b=j[1],f=Object(n.useRecoilState)(g),v=M()(f,2),R=v[0],S=v[1],w=Object(n.useRecoilValue)(p),C=Object(n.useRecoilState)(m),D=M()(C,2),L=(D[0],D[1]),q=Object(n.useRecoilState)(V),F=M()(q,2),H=(F[0],F[1]),E=Object(n.useRecoilValue)(A),T=Object(n.useRecoilValue)(y),B=Object(n.useRecoilValue)(h),I=Object(n.useRecoilValue)(O),N=Object(u.useState)(1),W=M()(N,2),J=W[0],U=W[1],Y=Object(u.useState)(0),G=M()(Y,2),K=G[0],Q=G[1],X=Object(u.useState)(0),Z=M()(X,2),$=Z[0],_=Z[1],ee=Object(u.useState)(0),te=M()(ee,2),oe=te[0],ne=te[1],ie=Object(u.useCallback)((function(){if(I&&!B){if(r((function(e){return e-$})),!E.positionActive&&oe>0)L({positionActive:!0,openPrice:w,liquidPrice:d,leverage:J,openPositionValue:w*oe,openPositionAmount:oe,currentPositionValue:w*oe});else E.positionActive&&oe>0?L((function(e){var t=Object(z.cloneDeep)(e),o=w*oe;return t.openPrice=(t.openPrice*t.openPositionAmount+o)/(t.openPositionAmount+oe),t.openPositionAmount=t.openPositionAmount+oe,t.openPositionValue=t.openPositionValue+o,t.currentPositionValue=t.currentPositionValue+o,t.liquidPrice=t.openPrice*(1-1/t.leverage),t})):0===oe&&alert("0\uac1c\ub294 \uc8fc\ubb38\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");Q(0)}}),[I,B,E,$,oe]),ce=Object(u.useCallback)((function(){if(!I&&!B){if(r((function(e){return e-$})),!T.positionActive&&oe>0)H({positionActive:!0,openPrice:w,liquidPrice:R,leverage:J,openPositionValue:w*oe,openPositionAmount:oe,currentPositionValue:w*oe});else T.positionActive&&oe>0?H((function(e){var t=Object(z.cloneDeep)(e),o=w*oe;return t.openPrice=(t.openPrice*t.openPositionAmount+o)/(t.openPositionAmount+oe),t.openPositionAmount=t.openPositionAmount+oe,t.openPositionValue=t.openPositionValue+o,t.currentPositionValue=t.currentPositionValue+o,t.liquidPrice=t.openPrice*(1+1/t.leverage),t})):0===oe&&alert("0\uac1c\ub294 \uc8fc\ubb38\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");Q(0)}}),[I,B,T,$,oe]);return Object(u.useEffect)((function(){var e=a*K/100,t=Math.floor(e/(w*(1+4e-4*J)));ne(t)}),[K,J]),Object(u.useEffect)((function(){_(w*oe*(1+4e-4*J))}),[w,oe]),Object(u.useEffect)((function(){B?(b(0),S(0)):I?b(w*(1-1/J)):S(w*(1+1/J))}),[w,J,B,I]),Object(u.useEffect)((function(){B&&Q(0)}),[B]),Object(k.jsxs)(i.default,{children:[Object(k.jsx)(re,{activeLeverage:o,leverage:J,setLeverage:U,disabled:t}),Object(k.jsx)(ae,{amountRate:K,setAmountRate:Q}),Object(k.jsx)(se,{totalPrice:$,coinAmount:oe}),Object(k.jsx)(ue,{isLongSelected:I,longLiquid:d,shortLiquid:R}),I?Object(k.jsx)(je,{isCandleMoving:B,buttonHandler:ie,isBuy:!0}):Object(k.jsx)(je,{isCandleMoving:B,buttonHandler:ce,isBuy:!1})]})};var be=function(){var e=Object(n.useRecoilValue)(A);return Object(k.jsx)(de,{disabled:e.positionActive,activeLeverage:e.positionActive?e.leverage:null})};var fe=function(){var e=Object(n.useRecoilValue)(y);return Object(k.jsx)(de,{disabled:e.positionActive,activeLeverage:e.positionActive?e.leverage:null})};var Oe=function(){var e=Object(n.useRecoilState)(O),t=M()(e,2),o=t[0],c=t[1];return Object(k.jsxs)(i.default,{style:r.trade,children:[Object(k.jsx)(ie,{options:[{label:"Long",value:!0},{label:"Short",value:!1}],value:o,setValueFunction:c}),o?Object(k.jsx)(be,{}):Object(k.jsx)(fe,{})]})};var he=function(){return Object(k.jsx)(i.default,{style:r.controlPanel,children:Object(k.jsxs)(te.default,{pagingEnabled:!0,horizontal:!0,showsHorizontalScrollIndicator:!1,children:[Object(k.jsx)(Oe,{}),Object(k.jsx)(oe,{})]})})};var pe=function(){var e=Object(n.useRecoilState)(f),t=M()(e,2),o=(t[0],t[1]),c=Object(n.useResetRecoilState)(P),l=Object(n.useResetRecoilState)(m),a=Object(n.useResetRecoilState)(V),u=Object(n.useRecoilState)(h),j=M()(u,2),d=j[0],b=j[1];return Object(k.jsxs)(i.default,{style:r.rootControlButton,children:[Object(k.jsx)(Y.default,{onPress:function(){c(),l(),a()},style:d?{flex:1,backgroundColor:"red",height:"100%",opacity:.6}:{flex:1,backgroundColor:"red",height:"100%"},disabled:d,children:Object(k.jsx)(s.default,{children:"\uacc4\uc88c \ucd08\uae30\ud654"})}),Object(k.jsx)(Y.default,{onPress:function(){b(!0),o((function(e){return e+1}))},style:d?{flex:2,backgroundColor:"skyblue",height:"100%",opacity:.6}:{flex:2,backgroundColor:"skyblue",height:"100%"},disabled:d,children:Object(k.jsx)(s.default,{children:"Next Turn"})})]})};var ve=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(i.default,{style:r.display,children:[Object(k.jsx)(D,{}),Object(k.jsx)(J,{}),Object(k.jsx)(C,{}),Object(k.jsx)(ee,{}),Object(k.jsx)(he,{}),Object(k.jsx)(pe,{})]})})};function xe(){return Object(k.jsx)(n.RecoilRoot,{children:Object(k.jsx)(ve,{})})}},398:function(e,t,o){e.exports=o(652)}},[[398,1,2]]]);
//# sourceMappingURL=app.b05a2371.chunk.js.map